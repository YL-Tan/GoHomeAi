# TODO:
#	1.	Caching the micromamba env is possible with actions/cache keyed on environment.lock.yml. Add it later once the workflow stabilises.
#	2.	For Go and Node steps, chain them after the bootstrapâ€”each language toolchain is independent.
name: CI

on:
  push:
    branches: [ main, feature/** ]
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4


      - name: Bootstrap Python env
        env:
          MAMBA_ROOT_PREFIX: ${{ runner.temp }}/mamba
        run: bash ./scripts/bootstrap.sh

      - name: Run tests
        run: micromamba run -n ai-smarthome pytest -q ml/tests